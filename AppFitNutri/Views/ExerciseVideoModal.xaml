<?xml version="1.0" encoding="utf-8"?>

<ContentPage x:Class="AppFitNutri.Views.ExerciseVideoModal"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodel="clr-namespace:AppFitNutri.ViewModel"
             x:DataType="viewmodel:ExerciseVideoViewModel"
             BackgroundColor="#99000000">

    <Grid>
        <!-- Modal Background (semi-transparent) -->
        <BoxView Color="#99000000">
            <BoxView.GestureRecognizers>
                <TapGestureRecognizer Command="{Binding CloseCommand}" />
            </BoxView.GestureRecognizers>
        </BoxView>

        <!-- Modal Content -->
        <Border BackgroundColor="White"
                StrokeThickness="0"
                StrokeShape="RoundRectangle 24"
                Margin="16"
                VerticalOptions="Center"
                MaximumHeightRequest="600">
            <Border.Shadow>
                <Shadow Brush="#000000" Offset="0,8" Radius="24" Opacity="0.3" />
            </Border.Shadow>

            <Grid RowDefinitions="Auto,*,Auto" Padding="0">
                <!-- Header -->
                <Border Grid.Row="0" 
                        BackgroundColor="#3B82F6"
                        StrokeThickness="0"
                        Padding="16"
                        StrokeShape="RoundRectangle 24,24,0,0">
                    <Grid ColumnDefinitions="*,Auto">
                        <VerticalStackLayout Grid.Column="0" Spacing="4">
                            <Label Text="Como Executar"
                                   FontSize="20"
                                   FontAttributes="Bold"
                                   TextColor="White" />
                            <Label Text="{Binding ExerciseName}"
                                   FontSize="14"
                                   TextColor="White"
                                   Opacity="0.9"
                                   LineBreakMode="TailTruncation" />
                        </VerticalStackLayout>

                        <!-- Close Button -->
                        <Border Grid.Column="1"
                                BackgroundColor="#FFFFFF33"
                                StrokeThickness="0"
                                StrokeShape="RoundRectangle 20"
                                Padding="8"
                                HeightRequest="40"
                                WidthRequest="40"
                                VerticalOptions="Center">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding CloseCommand}" />
                            </Border.GestureRecognizers>
                            <Label Text="âœ•"
                                   FontSize="20"
                                   TextColor="White"
                                   HorizontalTextAlignment="Center"
                                   VerticalTextAlignment="Center" />
                        </Border>
                    </Grid>
                </Border>

                <!-- Video Content -->
                <ScrollView Grid.Row="1" Padding="16">
                    <VerticalStackLayout Spacing="16">
                        <!-- Player de vÃ­deo -->
                        <Border BackgroundColor="#000000"
                                StrokeThickness="0"
                                StrokeShape="RoundRectangle 12"
                                HeightRequest="300">
                            <WebView x:Name="VideoWebView"
                                     HeightRequest="300"
                                     HorizontalOptions="Fill"
                                     VerticalOptions="Fill" />
                        </Border>

                        <!-- Exercise Details -->
                        <Border BackgroundColor="#F8FAFC"
                                StrokeThickness="0"
                                StrokeShape="RoundRectangle 12"
                                Padding="16">
                            <VerticalStackLayout Spacing="12">
                                <Label Text="Detalhes do ExercÃ­cio"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       TextColor="#1E293B" />

                                <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto" ColumnSpacing="16" RowSpacing="12">
                                    <VerticalStackLayout Grid.Row="0" Grid.Column="0" Spacing="4">
                                        <Label Text="SÃ©ries"
                                               FontSize="12"
                                               TextColor="#64748B"
                                               FontAttributes="Bold" />
                                        <Label Text="{Binding Sets}"
                                               FontSize="20"
                                               TextColor="#3B82F6"
                                               FontAttributes="Bold" />
                                    </VerticalStackLayout>

                                    <VerticalStackLayout Grid.Row="0" Grid.Column="1" Spacing="4">
                                        <Label Text="RepetiÃ§Ãµes"
                                               FontSize="12"
                                               TextColor="#64748B"
                                               FontAttributes="Bold" />
                                        <Label Text="{Binding Reps}"
                                               FontSize="20"
                                               TextColor="#10B981"
                                               FontAttributes="Bold" />
                                    </VerticalStackLayout>
                                </Grid>

                                <BoxView HeightRequest="1" BackgroundColor="#E2E8F0" />

                                <VerticalStackLayout Spacing="8">
                                    <Label Text="ðŸ’¡ Dicas de ExecuÃ§Ã£o"
                                           FontSize="14"
                                           FontAttributes="Bold"
                                           TextColor="#1E293B" />
                                    <Label TextColor="#334155" FontSize="13" LineBreakMode="WordWrap">
                                        <Label.FormattedText>
                                            <FormattedString>
                                                <Span Text="â€¢ Mantenha a postura correta durante todo o movimento" />
                                                <Span Text="&#x0a;" />
                                                <Span Text="â€¢ Controle a descida (fase excÃªntrica)" />
                                                <Span Text="&#x0a;" />
                                                <Span Text="â€¢ Respire corretamente: expire no esforÃ§o" />
                                                <Span Text="&#x0a;" />
                                                <Span Text="â€¢ Foque na conexÃ£o mente-mÃºsculo" />
                                            </FormattedString>
                                        </Label.FormattedText>
                                    </Label>
                                </VerticalStackLayout>
                            </VerticalStackLayout>
                        </Border>
                    </VerticalStackLayout>
                </ScrollView>

                <!-- Footer Actions -->
                <Border Grid.Row="2"
                        BackgroundColor="#F8FAFC"
                        StrokeThickness="0"
                        Padding="16"
                        StrokeShape="RoundRectangle 0,0,24,24">
                    <Button Text="Entendi, Vamos Treinar! ðŸ’ª"
                            BackgroundColor="#3B82F6"
                            TextColor="White"
                            FontAttributes="Bold"
                            FontSize="16"
                            CornerRadius="12"
                            HeightRequest="50"
                            Command="{Binding CloseCommand}" />
                </Border>
            </Grid>
        </Border>
    </Grid>
</ContentPage>

