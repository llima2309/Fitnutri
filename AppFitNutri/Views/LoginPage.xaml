<?xml version="1.0" encoding="utf-8" ?>
<ContentPage  
x:Class="AppFitNutri.Views.LoginPage"  
xmlns="http://schemas.microsoft.com/dotnet/2021/maui"  
xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml">
    <!-- Gradient Background -->
    <ContentPage.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#4A90E2" Offset="0.0" />
            <GradientStop Color="#7ED321" Offset="0.5" />
            <GradientStop Color="#4A90E2" Offset="1.0" />
        </LinearGradientBrush>
    </ContentPage.Background>

    <Grid Padding="20" RowSpacing="40">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Header with Logo and Title -->
        <StackLayout Grid.Row="0" Spacing="20" Margin="0,40,0,0">
            <!-- Logo Icon -->
            <Border BackgroundColor="White"
                    StrokeShape="RoundRectangle 25"
                    WidthRequest="100"
                    HeightRequest="100"
                    HorizontalOptions="Center">
                <Border.Shadow>
                    <Shadow Brush="Black"
                            Offset="0,4"
                            Radius="8"
                            Opacity="0.3" />
                </Border.Shadow>
                <Image Source="logofitnutri.png"
                       Aspect="AspectFit"
                       WidthRequest="80"
                       HeightRequest="80"
                       HorizontalOptions="Center"
                       VerticalOptions="Center" />
            </Border>
            <!-- Title -->
            <Label Text="FitNutri"
                   FontSize="32"
                   FontAttributes="Bold"
                   TextColor="White"
                   HorizontalOptions="Center">
                <Label.Shadow>
                    <Shadow Brush="#222" Offset="0,2" Radius="6" Opacity="0.3" />
                </Label.Shadow>
            </Label>
        </StackLayout>

        <!-- Login Form -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout
                VerticalOptions="CenterAndExpand"
                HorizontalOptions="Center"
                Spacing="20">

                <!-- Login/E-mail -->
                <Border BackgroundColor="White"
                        StrokeShape="RoundRectangle 15"
                        WidthRequest="300"
                        HeightRequest="60"
                        Margin="0,0,0,0">
                    <Border.Shadow>
                        <Shadow Brush="Black" Offset="0,2" Radius="4" Opacity="0.2" />
                    </Border.Shadow>
                    <Entry Placeholder="Login/E-mail"
                           PlaceholderColor="Gray"
                           TextColor="Black"
                           Text="{Binding EmailOrUserName}"
                           Margin="16,10"
                           Keyboard="Email" />
                </Border>

                <!-- Senha -->
                <Border BackgroundColor="White"
                        StrokeShape="RoundRectangle 15"
                        WidthRequest="300"
                        HeightRequest="60"
                        Margin="0,0,0,0">
                    <Border.Shadow>
                        <Shadow Brush="Black" Offset="0,2" Radius="4" Opacity="0.2" />
                    </Border.Shadow>
                    <Grid>
                        <Entry Placeholder="Senha"
                               PlaceholderColor="Gray"
                               TextColor="Black"
                               IsPassword="{Binding IsPassword}"
                               Text="{Binding Password}"
                               Margin="16,10,40,10" />
                        <!-- Mostrar senha como ícone, sem borda -->
                        <Image Source="eye_icon.png"
                               WidthRequest="28"
                               HeightRequest="28"
                               VerticalOptions="Center"
                               HorizontalOptions="End"
                               Margin="0,0,16,0">
                            <Image.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding TogglePasswordCommand}" />
                            </Image.GestureRecognizers>
                        </Image>
                    </Grid>
                </Border>

                <!-- Mensagem de erro -->
                <Label Text="{Binding ErrorMessage}"
                       TextColor="#D32F2F"
                       FontSize="13"
                       FontAttributes="Bold"
                       HorizontalTextAlignment="Center"
                       IsVisible="{Binding HasError}"
                       Margin="0,4,0,0" />

                <!-- Botão Entrar -->
                <Border BackgroundColor="#4A90E2"
                        StrokeShape="RoundRectangle 30"
                        WidthRequest="300"
                        HeightRequest="60"
                        Margin="0,0,0,0">
                    <Border.Shadow>
                        <Shadow Brush="Black" Offset="0,4" Radius="8" Opacity="0.2" />
                    </Border.Shadow>
                    <Button Text="{Binding LoginButtonText}"
                            Command="{Binding EntrarCommand}"
                            BackgroundColor="Transparent"
                            TextColor="White"
                            FontAttributes="Bold"
                            Padding="15"
                            IsEnabled="{Binding IsNotBusy}"
                            FontSize="18"
                            HorizontalOptions="FillAndExpand"
                            VerticalOptions="Center" />
                </Border>

                <!-- Separador "Ou" -->
                <Label Text="Ou"
                       TextColor="White"
                       FontSize="16"
                       FontAttributes="Bold"
                       HorizontalOptions="Center"
                       Margin="0,5,0,5">
                    <Label.Shadow>
                        <Shadow Brush="Black" Offset="0,1" Radius="2" Opacity="0.3" />
                    </Label.Shadow>
                </Label>

                <!-- Botão Cadastrar-se -->
                <Border BackgroundColor="#7ED321"
                        StrokeShape="RoundRectangle 30"
                        WidthRequest="300"
                        HeightRequest="60"
                        Margin="0,0,0,0">
                    <Border.Shadow>
                        <Shadow Brush="Black" Offset="0,4" Radius="8" Opacity="0.2" />
                    </Border.Shadow>
                    <Button Text="Cadastrar-se"
                            Command="{Binding IrParaRegistrarCommand}"
                            BackgroundColor="Transparent"
                            TextColor="White"
                            FontAttributes="Bold"
                            Padding="15"
                            IsEnabled="{Binding IsNotBusy}"
                            FontSize="18"
                            HorizontalOptions="FillAndExpand"
                            VerticalOptions="Center" />
                </Border>

                <!-- Link Esqueceu a senha? -->
                <Grid HorizontalOptions="Center" Margin="0,15,0,0">
                    <Label Text="Esqueceu a senha?"
                           TextColor="White"
                           FontSize="15"
                           FontAttributes="Bold"
                           HorizontalOptions="Center"
                           Padding="0,2">
                        <Label.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding IrParaEsqueciSenhaCommand}" />
                        </Label.GestureRecognizers>
                        <Label.Shadow>
                            <Shadow Brush="Black" Offset="0,1" Radius="2" Opacity="0.3" />
                        </Label.Shadow>
                    </Label>
                    <!-- Sublinhado -->
                    <BoxView HeightRequest="1"
                             BackgroundColor="White"
                             HorizontalOptions="Fill"
                             VerticalOptions="End"
                             Margin="0,0,0,0"
                             Opacity="0.8" />
                </Grid>

            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>