<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="AppFitNutri.Views.RegisterPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml">
    <ContentPage.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#4A90E2" Offset="0.0" />
            <GradientStop Color="#7ED321" Offset="0.5" />
            <GradientStop Color="#4A90E2" Offset="1.0" />
        </LinearGradientBrush>
    </ContentPage.Background>
    <Grid>
        <ScrollView>
            <VerticalStackLayout
                VerticalOptions="CenterAndExpand"
                HorizontalOptions="FillAndExpand"
                Spacing="12">
                <!-- Título -->
                <Label Text="Criar conta"
                       FontSize="22"
                       FontAttributes="Bold"
                       TextColor="#13734d"
                       HorizontalTextAlignment="Center"
                       Margin="0,0,0,20" />

                <!-- Usuário -->
                <Border BackgroundColor="White"
                        StrokeShape="RoundRectangle 30"
                        Padding="2,0"
                        WidthRequest="300">
                    <Entry Placeholder="Usuário"
                           PlaceholderColor="Gray"
                           TextColor="Black"
                           Text="{Binding UserName}" />
                </Border>

                <!-- E-mail -->
                <Border BackgroundColor="White"
                        StrokeShape="RoundRectangle 30"
                        Padding="2,0"
                        WidthRequest="300">
                    <Entry Placeholder="E-mail"
                           PlaceholderColor="Gray"
                           TextColor="Black"
                           Keyboard="Email"
                           Text="{Binding Email}" />
                </Border>

                <!-- Senha -->
                <Border BackgroundColor="White"
                        StrokeShape="RoundRectangle 30"
                        Padding="2,0"
                        WidthRequest="300">
                    <Entry Placeholder="Senha"
                           PlaceholderColor="Gray"
                           TextColor="Black"
                           IsPassword="{Binding MostrarSenha, Converter={StaticResource BoolInverseConverter}}"
                           Text="{Binding Password}" />
                </Border>

                <!-- Confirmar senha -->
                <Border BackgroundColor="White"
                        StrokeShape="RoundRectangle 30"
                        Padding="2,0"
                        WidthRequest="300">
                    <Entry Placeholder="Confirmar senha"
                           PlaceholderColor="Gray"
                           TextColor="Black"
                           IsPassword="{Binding MostrarSenha, Converter={StaticResource BoolInverseConverter}}"
                           Text="{Binding ConfirmPassword}" />
                </Border>

                <!-- Mostrar senha -->
                <Border BackgroundColor="White"
                        StrokeShape="RoundRectangle 30"
                        Padding="2,0"
                        WidthRequest="300"
                        Margin="0,4,0,0">
                    <HorizontalStackLayout Spacing="8">
                        <CheckBox IsChecked="{Binding MostrarSenha}" />
                        <Label Text="Mostrar senha" VerticalTextAlignment="Center" />
                    </HorizontalStackLayout>
                </Border>

                <!-- Mensagem de erro -->
                <Label Text="{Binding ErrorMessage}"
                       TextColor="Red"
                       FontSize="12"
                       HorizontalTextAlignment="Center"
                       IsVisible="{Binding HasError}"
                       Margin="0,4,0,0"/>

                <!-- Botão Registrar -->
                <Button Text="Registrar"
                        Command="{Binding RegistrarCommand}"
                        WidthRequest="300"
                        CornerRadius="30"
                        BackgroundColor="White"
                        TextColor="Black"
                        FontAttributes="Bold"
                        Padding="15"
                        IsEnabled="{Binding IsNotBusy}" />

                <!-- Loading -->
                <ActivityIndicator IsVisible="{Binding IsBusy}"
                                   IsRunning="{Binding IsBusy}"
                                   HorizontalOptions="Center" />

                <!-- Voltar ao login -->
                <Button Text="Já tenho conta"
                        Command="{Binding VoltarLoginCommand}"
                        WidthRequest="300"
                        CornerRadius="30"
                        BackgroundColor="Transparent"
                        TextColor="#13734d" />
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
