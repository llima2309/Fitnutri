<?xml version="1.0" encoding="utf-8"?>

<ContentPage
    x:Class="AppFitNutri.Views.ForgotPasswordPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:viewmodels="clr-namespace:AppFitNutri.ViewModel">
    <!-- Gradient Background -->
    <ContentPage.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#4A90E2" Offset="0.0" />
            <GradientStop Color="#7ED321" Offset="0.5" />
            <GradientStop Color="#4A90E2" Offset="1.0" />
        </LinearGradientBrush>
    </ContentPage.Background>

    <Grid Padding="10" RowSpacing="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Header with Logo and Title -->
        <StackLayout Grid.Row="0" Spacing="10" Margin="0,0 ,0,0">
            <!-- Logo Icon -->
            <Border BackgroundColor="White"
                    StrokeShape="RoundRectangle 25"
                    WidthRequest="100"
                    HeightRequest="100"
                    HorizontalOptions="Center">
                <Border.Shadow>
                    <Shadow Brush="Black"
                            Offset="0,4"
                            Radius="8"
                            Opacity="0.3" />
                </Border.Shadow>
                <Image Source="logofitnutri.png"
                       Aspect="AspectFit"
                       WidthRequest="80"
                       HeightRequest="80"
                       HorizontalOptions="Center"
                       VerticalOptions="Center" />
            </Border>
            <!-- Title -->
            <Label Text="FitNutri"
                   FontSize="32"
                   FontAttributes="Bold"
                   TextColor="White"
                   HorizontalOptions="Center">
                <Label.Shadow>
                    <Shadow Brush="#222" Offset="0,2" Radius="6" Opacity="0.3" />
                </Label.Shadow>
            </Label>
        </StackLayout>

        <!-- Login Form -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout
                VerticalOptions="StartAndExpand"
                HorizontalOptions="Center"
                Spacing="12">

                <!-- Subtítulo -->
                <Label Text="Informe seu e-mail para receber as instruções de recuperação"
                       FontSize="14"
                       TextColor="Black"
                       HorizontalTextAlignment="Center"
                       Margin="0,0,0,20" />

                <!-- E-mail -->
                <Frame HasShadow="False"
                       CornerRadius="30"
                       BackgroundColor="White"
                       Padding="0"
                       WidthRequest="300">
                    <Entry Placeholder="Seu e-mail"
                           PlaceholderColor="LightGray"
                           Text="{Binding Email}"
                           TextColor="Black"
                           Margin="16,10"
                           Keyboard="Email" />
                </Frame>

                <!-- Mensagem de sucesso -->
                <Frame HasShadow="False"
                       CornerRadius="15"
                       BackgroundColor="#d4edda"
                       BorderColor="#c3e6cb"
                       Padding="15"
                       WidthRequest="300"
                       IsVisible="{Binding HasSuccess}">
                    <Label Text="{Binding SuccessMessage}"
                           TextColor="#155724"
                           FontSize="12"
                           HorizontalTextAlignment="Center" />
                </Frame>

                <!-- Mensagem de erro -->
                <Label Text="{Binding ErrorMessage}"
                       TextColor="Red"
                       FontSize="12"
                       HorizontalTextAlignment="Center"
                       IsVisible="{Binding HasError}"
                       Margin="0,4,0,0" />

                <!-- Botão Enviar -->
                <Button Text="Enviar Solicitação"
                        Command="{Binding EnviarSolicitacaoCommand}"
                        WidthRequest="300"
                        CornerRadius="30"
                        BackgroundColor="#13734d"
                        TextColor="White"
                        FontAttributes="Bold"
                        Padding="15"
                        IsEnabled="{Binding IsNotBusy}" />

                <!-- Botão Voltar -->
                <Button Text="← Voltar para o login"
                        Command="{Binding VoltarParaLoginCommand}"
                        CornerRadius="30"
                        BackgroundColor="Transparent"
                        TextColor="#13734d"
                        FontSize="14"
                        Margin="0,10,0,0" />

                <!-- Loading -->
                <ActivityIndicator IsVisible="{Binding IsBusy}"
                                   IsRunning="{Binding IsBusy}"
                                   HorizontalOptions="Center"
                                   Color="#13734d" />
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>